<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>RealCaptcha by omranjamal</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>RealCaptcha</h1>
        <p>An advanced PHP Captcha Generator</p>

        <p class="view"><a href="https://github.com/omranjamal/RealCaptcha">View the Project on GitHub <small>omranjamal/RealCaptcha</small></a></p>


        <ul>
          <li><a href="https://github.com/omranjamal/RealCaptcha/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/omranjamal/RealCaptcha/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/omranjamal/RealCaptcha">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="realcaptcha" class="anchor" href="#realcaptcha"><span class="octicon octicon-link"></span></a>RealCaptcha</h1>

<p>A PHP Library that uses the <a href="http://php.net/manual/en/book.image.php">PHP-GD</a> Extension to generate Captchas with only PHP.<br>
RealCaptcha is released under the <a href="https://github.com/omranjamal/RealCaptcha/blob/master/LICENSE.txt">MIT License</a>. Visit the project <a href="http://omranjamal.github.io/RealCaptcha">Homepage</a> for more information.</p>

<p><strong>Note:</strong> This code is still in its Beta stage so it maybe prone to many bugs...<br><strong>Note:</strong> The Fonts included here are not created or owned by the author of the code,
but none the less, their liscenses are open-source, commercial-friendly and permit redistribution, <a href="#fonts">Check them out</a> yourself.</p>

<p><img src="https://raw.githubusercontent.com/omran-jamal/realCaptcha/master/examples/output/c6.jpg" alt="Example Image"></p>

<h2>
<a name="features" class="anchor" href="#features"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>Custom Fonts</li>
<li>Customizable Colors</li>
<li>
<p>Supports 4 different captcha text sources</p>

<ul>
<li><p><strong>Input</strong><br></p></li>
<li><p><strong>Custom Generator Functions</strong><br> You can define a custom function of your own that generates the text that should be in the captcha.<br></p></li>
<li><p><strong>Random Text Generator</strong><br> Generates a random string of Letters and Numbers.<br></p></li>
<li><p><strong>Dictionary File</strong><br> Can use any file containing space separated words as a dictionary file to choose words from.</p></li>
</ul>
</li>
<li><p>Captcha Image Compression</p></li>
<li>3 different output formats ( <strong>jpg</strong>, <strong>png</strong>, <strong>gif</strong> )</li>
<li>Output locations

<ul>
<li>To Browser</li>
<li>To File</li>
<li>Return GD Resource Handle</li>
</ul>
</li>
</ul><h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>The simplest method is using <a href="https://getcomposer.org">Composer</a>. Just require it in your <code>composer.json</code> file as such:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"require"</span><span class="p">:{</span>
        <span class="nt">"omranjamal/real-captcha"</span><span class="p">:</span><span class="s2">"dev-master"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>To incluude it in your project, include the composer autoloader and just create new objects of the <code>RealCaptcha</code> class under the <code>omranjamal\RealCaptcha</code> namespace as such:</p>

<div class="highlight highlight-php"><pre><span class="k">include</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>
<span class="nv">$captcha</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">omranjamal\RealCaptcha\RealCaptcha</span><span class="p">();</span>
</pre></div>

<p>Alternatively you could manually clone or download this reppository and directly include the Class file in and create an object of <code>omranjamal\RealCaptcha\RealCaptcha</code></p>

<h2>
<a name="basic-usage" class="anchor" href="#basic-usage"><span class="octicon octicon-link"></span></a>Basic Usage</h2>

<h3>
<a name="basic" class="anchor" href="#basic"><span class="octicon octicon-link"></span></a>Basic</h3>

<div class="highlight highlight-php"><pre><span class="nv">$captcha</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">omranjamal\RealCaptcha\RealCaptcha</span><span class="p">();</span>
<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s2">"jpg"</span><span class="p">);</span>
</pre></div>

<h3>
<a name="configuring" class="anchor" href="#configuring"><span class="octicon octicon-link"></span></a>Configuring</h3>

<p>All three of these code output similar Captchas to the browser in JPG Format.  </p>

<p>While Initializing</p>

<div class="highlight highlight-php"><pre><span class="nv">$realCaptcha</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">omranjamal\RealCaptcha\RealCaptcha</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s2">"height"</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span>
    <span class="s2">"width"</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
    <span class="s2">"number_of_words"</span> <span class="o">=</span> <span class="mi">2</span>
<span class="p">));</span>

<span class="nv">$captcha</span> <span class="o">=</span> <span class="nv">$realCaptcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">();</span>
<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s2">"jpg"</span><span class="p">);</span>
</pre></div>

<p>The Settings you provide at Initialization will be used every time the <code>generate()</code> method is called.  </p>

<p>Using the <strong><em><code>set()</code></em></strong> method</p>

<div class="highlight highlight-php"><pre><span class="nv">$realCaptcha</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">omranjamal\RealCaptcha\RealCaptcha</span><span class="p">();</span>

<span class="nv">$realCaptcha</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s2">"height"</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span>
    <span class="s2">"width"</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
    <span class="s2">"number_of_words"</span> <span class="o">=</span> <span class="mi">2</span>
<span class="p">));</span>

<span class="nv">$captcha</span> <span class="o">=</span> <span class="nv">$realCaptcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">();</span>
<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s2">"jpg"</span><span class="p">);</span>
</pre></div>

<p>The settings you define with the <code>set()</code> method will overwrite the settings you provided at initialization and will be used
every time the <code>generate()</code> method is called.  </p>

<p>While Generating</p>

<div class="highlight highlight-php"><pre><span class="nv">$realCaptcha</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">omranjamal\RealCaptcha\RealCaptcha</span><span class="p">();</span>

<span class="nv">$captcha</span> <span class="o">=</span> <span class="nv">$realCaptcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s2">"height"</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span>
    <span class="s2">"width"</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span>
    <span class="s2">"number_of_words"</span> <span class="o">=</span> <span class="mi">2</span>
<span class="p">));</span>
<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s2">"jpg"</span><span class="p">);</span>
</pre></div>

<p>The <code>generate()</code> method will give high priority to the settings passed to it as an argument. These setting will be forgotten
as soon as the captcha is finished generating.</p>

<h3>
<a name="dealing-with-output" class="anchor" href="#dealing-with-output"><span class="octicon octicon-link"></span></a>Dealing with output</h3>

<div class="highlight highlight-php"><pre><span class="nv">$realCaptcha</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">omranjamal\RealCaptcha\RealCaptcha</span><span class="p">();</span>
<span class="nv">$captcha</span> <span class="o">=</span> <span class="nv">$realCaptcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">();</span>
</pre></div>

<p>The <code>generate()</code> method returns an Output object it has two methods and a buch of Properties.</p>

<h4>
<a name="the-methods" class="anchor" href="#the-methods"><span class="octicon octicon-link"></span></a>The Methods</h4>

<ul>
<li>
<code>file( path, format, quality)</code>: Writes Captcha to a file</li>
<li>
<code>output( format, quality)</code>: Sets appropriate image format headers and sends the Image data to browser</li>
</ul><h4>
<a name="the-properties" class="anchor" href="#the-properties"><span class="octicon octicon-link"></span></a>The Properties</h4>

<ul>
<li>
<code>text</code>: Contains a string words that are present in the captcha image, seperated by spaces</li>
<li>
<code>array</code>: Contains an Array of the words present in the captcha image.</li>
</ul><h4>
<a name="example" class="anchor" href="#example"><span class="octicon octicon-link"></span></a>Example</h4>

<p>This example generates a captcha and stores the captcha text  in a session variable so that it can be 
matched later and output the captcha image to browser and also daves the image to a file named <code>example.jpg</code></p>

<div class="highlight highlight-php"><pre><span class="nb">session_start</span><span class="p">();</span>
<span class="nv">$realCaptcha</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">omranjamal\RealCaptcha\RealCaptcha</span><span class="p">();</span>

<span class="nv">$captcha</span> <span class="o">=</span> <span class="nv">$realCaptcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">();</span>
<span class="nv">$_SESSION</span><span class="p">[</span><span class="s2">"captcha_text"</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">text</span><span class="p">;</span>
<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s2">"jpg"</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span>
<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">file</span><span class="p">(</span><span class="s2">"example.jpg"</span><span class="p">,</span><span class="s2">"jpg"</span><span class="p">,</span><span class="mi">100</span><span class="p">);</span>
</pre></div>

<h3>
<a name="saving-captcha-to-file" class="anchor" href="#saving-captcha-to-file"><span class="octicon octicon-link"></span></a>Saving Captcha to file</h3>

<p>To save captcha to file, you can use the <strong><code>file( file_path, format, quality)</code></strong> method.</p>

<div class="highlight highlight-php"><pre><span class="nv">$captcha</span> <span class="o">=</span> <span class="nv">$realCaptcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">();</span>
<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">file</span><span class="p">(</span><span class="s2">"file.jpg"</span> <span class="p">,</span><span class="s2">"jpg"</span><span class="p">,</span> <span class="mi">90</span><span class="p">);</span>
</pre></div>

<h2>
<a name="full-list-of-settings" class="anchor" href="#full-list-of-settings"><span class="octicon octicon-link"></span></a>Full List of settings</h2>

<ul>
<li>
<strong>height</strong> (a positive Integer) : Height of the generated Captcha Image.</li>
<li>
<strong>width</strong> (a positive integer) : Width of the generated Captcha Image.</li>
<li>
<strong>source</strong> (realCaptcha source type constant): Where to get the captcha text from.

<ul>
<li>
<strong><code>omranjamal\RealCaptcha\RealCaptcha::INPUT</code></strong>: Requires you to pass the captcha text while calling <code>generate()</code> method</li>
<li>
<strong><code>omranjamal\RealCaptcha\RealCaptcha::RANDOM</code></strong>: Generates a random string of letters and numbers.</li>
<li>
<strong><code>omranjamal\RealCaptcha\RealCaptcha::DICTIONARY</code></strong>: Selects words at random from the dictionary file.</li>
<li>
<strong><code>omranjamal\RealCaptcha\RealCaptcha::uFUNCTION</code></strong>: Requires you to set a custom made function that returns the captcha text.</li>
</ul>
</li>
<li>
<strong>dictionary_file</strong> (a valid file path): Path to the dictionary File.</li>
<li>
<strong>fonts_dir</strong> (a valid directory path): Path to the dictory containing all the fonts.</li>
<li>
<strong>number_of_words</strong> (a positive integer): Number of words the captcha image should contain.</li>
<li>
<strong>random_length</strong> (a positive integer): the length of the randomly generated string.</li>
<li>
<strong>background_color</strong> (realCaptcha variable_grey setting constant or array)

<ul>
<li>
<strong><code>omranjamal\RealCaptcha\RealCaptcha::GREY_VARIABLE</code></strong> : Randomly chooses a shade from white to light ash.</li>
<li>
<strong><code>array( int, int, int)</code></strong> : A numerical array containing RGB values.</li>
</ul>
</li>
<li>
<strong>text_color</strong> (array): A numerical array containing RGB values.</li>
</ul><h2>
<a name="advanced-usage" class="anchor" href="#advanced-usage"><span class="octicon octicon-link"></span></a>Advanced Usage</h2>

<h3>
<a name="setting-background-and-text-color" class="anchor" href="#setting-background-and-text-color"><span class="octicon octicon-link"></span></a>Setting Background and Text color</h3>

<p><img src="https://raw.githubusercontent.com/omran-jamal/realCaptcha/master/examples/output/c3.jpg" alt="Colored Example"></p>

<div class="highlight highlight-php"><pre><span class="nv">$captcha</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">omranjamal\RealCaptcha\RealCaptcha</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s2">"background_color"</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="c1">//Bright Red</span>
    <span class="s2">"text_color"</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">)</span> <span class="c1">//White</span>
<span class="p">));</span>

<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s2">"jpg"</span><span class="p">);</span>
</pre></div>

<h3>
<a name="using-direct-input" class="anchor" href="#using-direct-input"><span class="octicon octicon-link"></span></a>Using direct Input</h3>

<p>Both these codes are correct but work in different ways and the settings persist 
for different fractions of the run cycle.</p>

<p>Setting at Initialization</p>

<div class="highlight highlight-php"><pre><span class="nv">$captcha</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">omranjamal\RealCaptcha\RealCaptcha</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s2">"source"</span> <span class="o">=&gt;</span> <span class="nx">realCaptcha</span><span class="o">::</span><span class="na">INPUT</span>
<span class="p">));</span>

<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s2">"Text"</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s2">"jpg"</span><span class="p">);</span>
</pre></div>

<p>Setting at Generator</p>

<div class="highlight highlight-php"><pre><span class="nv">$captcha</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">omranjamal\RealCaptcha\RealCaptcha</span><span class="p">();</span>
<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s2">"Text"</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s2">"source"</span> <span class="o">=&gt;</span> <span class="nx">realCaptcha</span><span class="o">::</span><span class="na">INPUT</span><span class="p">))</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s2">"jpg"</span><span class="p">);</span>
</pre></div>

<p>It is Completely ok to pass String or an Array as input into the generator method,
thus both the following teo lines of code are valid</p>

<div class="highlight highlight-php"><pre><span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="s2">"Text"</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s2">"jpg"</span><span class="p">);</span>
<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s2">"example"</span><span class="p">,</span><span class="s2">"text"</span><span class="p">))</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s2">"jpg"</span><span class="p">);</span>
</pre></div>

<h3>
<a name="using-custom-text-generator-function" class="anchor" href="#using-custom-text-generator-function"><span class="octicon octicon-link"></span></a>Using Custom Text Generator Function</h3>

<p>Unlike <strong>Direct Input</strong> , Custom Functions cannot be set and declared at the <strong>generator</strong> method,
custom function usage has to be declared in the initialization settings or through the <code>set()</code> method
and the function has to be define through the <code>textFunction()</code> method as the first argument. All prior to 
calling the <code>generate()</code> method in which you intend to use the Custom function.</p>

<p><img src="https://raw.githubusercontent.com/omran-jamal/realCaptcha/master/examples/output/c7.jpg" alt="Example Function"></p>

<h4>
<a name="example-1" class="anchor" href="#example-1"><span class="octicon octicon-link"></span></a>Example</h4>

<div class="highlight highlight-php"><pre><span class="nv">$captcha</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">omranjamal\RealCaptcha\RealCaptcha</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s2">"source"</span> <span class="o">=&gt;</span> <span class="nx">realCaptcha</span><span class="o">::</span><span class="na">uFUNCTION</span>
<span class="p">));</span>

<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">textFunction</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="s2">"EXAMPLE"</span><span class="p">,</span><span class="s2">"FUNCTION"</span><span class="p">);</span>
<span class="p">});</span>

<span class="nv">$captcha</span><span class="o">-&gt;</span><span class="na">generate</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">(</span><span class="s2">"jpg"</span><span class="p">);</span>
</pre></div>

<h2>
<a name="fonts" class="anchor" href="#fonts"><span class="octicon octicon-link"></span></a>Fonts</h2>

<ul>
<li><a href="http://www.1001fonts.com/swirled-brk-font.html">swirled2</a></li>
<li><a href="http://www.1001fonts.com/seraphim-font.html">Seraphim Font</a></li>
<li><a href="http://www.1001fonts.com/potassium-scandal-font.html">Potassium Scandal</a></li>
<li><a href="http://www.1001fonts.com/rattytatty-font.html">RattyTatty</a></li>
<li><a href="http://www.fontsquirrel.com/fonts/Quick-End-Jerk">Quick End Jerk</a></li>
<li><a href="http://www.fontsquirrel.com/fonts/Zero-Zero-Is">Zero &amp; Zero Is</a></li>
<li><a href="http://www.1001fonts.com/previewance-font.html">Previewance</a></li>
<li><a href="http://www.1001fonts.com/playdough-font.html">Playdough</a></li>
<li><a href="http://www.1001fonts.com/paper-cut-font.html">Paper Cut</a></li>
<li><a href="http://www.fontsquirrel.com/fonts/Nervous-Rex">Nervous Rex</a></li>
<li><a href="http://www.fontsquirrel.com/fonts/Lilac-Malaria">Lilac Malaria</a></li>
<li><a href="http://www.fontsquirrel.com/fonts/Eraser">Eraser</a></li>
<li><a href="http://www.fontsquirrel.com/fonts/Edo">Edo</a></li>
<li><a href="http://www.fontsquirrel.com/fonts/CarbonType">CarbonType</a></li>
<li><a href="http://www.fontsquirrel.com/fonts/Boston-Traffic">Boston Traffic</a></li>
<li><a href="http://www.fontsquirrel.com/fonts/1942-report">1942 report</a></li>
</ul><h2>
<a name="liscense" class="anchor" href="#liscense"><span class="octicon octicon-link"></span></a>Liscense</h2>

<p>RealCaptcha is released under the <a href="LICENSE.txt">MIT License</a>. Visit the project <a href="http://omran-jamal.github.io/realCaptcha/">Homepage</a> for more information.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/omranjamal">omranjamal</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-51542843-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>